<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.mycode.jiaoxuepingjia.pjset.mapper.PjSetMapper">

    <select id="getPjSetList" resultType="com.mycode.jiaoxuepingjia.pjset.domain.PjSet">
        select * from JXPJ_PJSET
    </select>

    <select id="getPjSetTemplateList" resultType="com.mycode.jiaoxuepingjia.pjset.domain.PjSetTemplate">
        select * from JXPJ_PJSET_TEMPLATE
    </select>

    <select id="getPjSetTargetList" resultType="com.mycode.jiaoxuepingjia.pjset.domain.PjSetTarget">
        select * from JXPJ_PJSET_TARGET
    </select>

    <!-- 查看当前是否有可用的模板信息 -->
    <select id="isPj" resultType="java.lang.String">
        select template_code
        from jxpj_pjset
        where template_type = #{templateType} and end_date > current_date
    </select>

    <!-- 根据模板编号获取模板信息 -->
    <select id="getPjSetTargetListByTemplateCode" resultType="com.mycode.jiaoxuepingjia.pjset.domain.PjSetTarget">
        select t.*
        from jxpj_pjset_template_target tt left join jxpj_pjset_target t on t.target_code = tt.target_code
        where tt.template_code = #{templateCode}
    </select>
</mapper>